CREATE TABLE users (
    id VARCHAR(255) PRIMARY KEY NOT NULL UNIQUE,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    image TEXT,
    role VARCHAR(50) NOT NULL CHECK (role IN ('user', 'admin', 'superuser')) DEFAULT 'user',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE prices (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    amount DECIMAL(10, 2) NOT NULL,
    period VARCHAR(10) NOT NULL CHECK (period in ('MONTHLY', 'DAILY', 'YEARLY')) DEFAULT 'MONTHLY',
    currency VARCHAR(10) NOT NULL
);

CREATE TABLE reviews (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    message TEXT,
    property_id INT NOT NULL,
    user_id VARCHAR(255) NOT NULL,
    rating INT NOT NULL CHECK (rating <= 5)
);

CREATE TABLE property (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    description VARCHAR(255) NOT NULL,
    is_popular BOOLEAN NOT NULL DEFAULT false,
    property_type VARCHAR(255) NOT NULL CHECK (propertyType IN ('SINGLE', 'DOUBLE', 'BHK', 'VILLA', 'SHARED')),
    like_count INTEGER DEFAULT 0,
    title VARCHAR(255) NOT NULL,
    review_id INT,
    host_id VARCHAR(255) NOT NULL,
    amenities TEXT[],
    bed INT,
    hall INT,
    kitchen INT,
    balcony INT,
    washroom_type VARCHAR(255) CHECK (washroomType IN ('SHARED', 'ATTACHED')) DEFAULT 'SHARED',
    washroom_count INT,
    property_width DECIMAL(10, 2) NOT NULL,
    property_length DECIMAL(10, 2) NOT NULL,
    unit VARCHAR(50) NOT NULL CHECK (unit IN ('METER', 'FEET')) DEFAULT 'METER',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    upadated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (host_id) REFERENCES users(id)
);

CREATE TABLE addresses (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    property_id INT NOT NULL,
    street_address VARCHAR(255) NOT NULL,
    city VARCHAR(100) NOT NULL,
    state VARCHAR(100) NOT NULL,
    postal_code VARCHAR(20) NOT NULL,
    country VARCHAR(100) NOT NULL,
    FOREIGN KEY (property_id) REFERENCES property(id)
);

CREATE TABLE images (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    url VARCHAR(255) NOT NULL,
    alt VARCHAR(255) DEFAULT 'property image',
    property_id INT NOT NULL,
    FOREIGN KEY (property_id) REFERENCES property(id)
);

CREATE TABLE wishlist (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    property_id INT NOT NULL,
    user_id VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (property_id) REFERENCES property(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE waitlist (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);